
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Presupuestador con envío</title>
</head>
<body>
    <h2>Formulario de presupuesto</h2>
    <form id="formulario">
        <label>Nombre: <input type="text" id="nombre" required></label><br>
        <label>Teléfono: <input type="text" id="telefono" required></label><br>
        <label>Email: <input type="email" id="email" required></label><br>
        <label>Comentario:<br><textarea id="comentario" rows="4" cols="50"></textarea></label><br><br>
        <button type="button" id="btnResumen">Mostrar resumen</button>
        <button type="button" id="btnFinalizar">Enviar presupuesto</button>
    </form>

    <div id="resumen" style="margin-top: 20px; padding: 10px; border: 1px solid #ccc;"></div>
    <div id="mensajeFinal" style="margin-top: 20px; color: green;"></div>

    <script>
    const resumenHtml = "<strong>Resumen simulado:</strong><ul><li>Producto: Encimera</li><li>Color: Blanco</li></ul>";

    document.getElementById('btnResumen').addEventListener('click', function () {
        document.getElementById('resumen').innerHTML = resumenHtml;
    });

    document.getElementById('btnFinalizar').addEventListener('click', function () {
        const nombre = document.getElementById('nombre').value.trim();
        const telefono = document.getElementById('telefono').value.trim();
        const email = document.getElementById('email').value.trim();
        const comentario = document.getElementById('comentario').value.trim();

        if (!nombre || !telefono || !email) {
            alert("Por favor completa todos los campos obligatorios.");
            return;
        }

        fetch("AQUI_TU_URL_DE_GOOGLE_SCRIPT", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ nombre, telefono, email, comentario, resumen: resumenHtml })
        })
        .then(res => res.json())
        .then(res => {
            if (res.status === "ok") {
                document.getElementById('formulario').classList.add('hidden');
                document.getElementById('mensajeFinal').innerHTML = "✅ ¡Presupuesto enviado correctamente!";
            } else {
                alert("❌ Error al enviar: " + res.message);
            }
        })
        .catch(err => {
            alert("❌ Error de conexión: " + err.message);
        });
    });
    </script>
</body>
</html>
